function pubsub_single_subscribe(s,u){var i=topics[s];i||(i=topics[s]=[]),i.push(u)}function pubsub_multi_subscribe(s,u){!function(){var i="__callback__:"+s.join("+"),b=0,n={};window.cargs=n,pubsub_single_subscribe(i,u);for(var c=0;c<s.length;c++)!function(){var u=s[c];pubsub_single_subscribe(u,function(){n[u]=arguments,b++,b==s.length&&publish(i,n)})}()}()}var topics={};subscribe=function(s,u){s instanceof Array?pubsub_multi_subscribe(s,u):pubsub_single_subscribe(s,u)},publish=function(s,u,i){var s=s.trim(),b=topics[s];if(b){u?u instanceof Array||(u=[u]):u=[],i||(i=null);for(var n=0;n<b.length;n++)b[n].apply(i,u)}};